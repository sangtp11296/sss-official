{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/sangt/OneDrive/Sang Shares Something/sss-official/client/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/sangt/OneDrive/Sang Shares Something/sss-official/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/sangt/OneDrive/Sang Shares Something/sss-official/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useContext,useEffect,useState}from'react';import PostContainer from'../Layout/PostContainer/PostContainer';import CoverTitle from'../Layout/CoverTitle/CoverTitle';import styles from'./SinglePost.module.css';import{useLocation,withRouter}from'react-router';import axios from'axios';import{Context}from'../../context/Context';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function SinglePost(props){props.setWhiteHeaderCallback(false);var location=useLocation();var slug=location.pathname.split('/')[2];var _useState=useState([{}]),_useState2=_slicedToArray(_useState,2),post=_useState2[0],setPost=_useState2[1];var _useContext=useContext(Context),user=_useContext.user;useEffect(function(){var getPost=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get('/posts/'+slug);case 2:res=_context.sent;setPost(res.data);case 4:case\"end\":return _context.stop();}}},_callee);}));return function getPost(){return _ref.apply(this,arguments);};}();getPost();},[slug]);var editCallBackFunction=function editCallBackFunction(editData){if(editData){props.history.push(\"/edit\",{state:post[0]});}};var deleteCallBackFunction=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(deleteData){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!deleteData){_context2.next=9;break;}_context2.prev=1;_context2.next=4;return axios.delete(\"/posts/\".concat(post[0]._id),{data:{username:user.username}});case 4:window.location.replace('/');_context2.next=9;break;case 7:_context2.prev=7;_context2.t0=_context2[\"catch\"](1);case 9:case\"end\":return _context2.stop();}}},_callee2,null,[[1,7]]);}));return function deleteCallBackFunction(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:styles.singlePost,children:[/*#__PURE__*/_jsx(CoverTitle,{postCover:post[0]}),/*#__PURE__*/_jsx(PostContainer,{postContent:post[0].content,editCallBackProp:editCallBackFunction,deleteCallBackProp:deleteCallBackFunction})]});}export default withRouter(SinglePost);","map":{"version":3,"sources":["C:/Users/sangt/OneDrive/Sang Shares Something/sss-official/client/src/components/SinglePost/SinglePost.js"],"names":["React","useContext","useEffect","useState","PostContainer","CoverTitle","styles","useLocation","withRouter","axios","Context","SinglePost","props","setWhiteHeaderCallback","location","slug","pathname","split","post","setPost","user","getPost","get","res","data","editCallBackFunction","editData","history","push","state","deleteCallBackFunction","deleteData","delete","_id","username","window","replace","singlePost","content"],"mappings":"ybAAA,MAAOA,CAAAA,KAAP,EAAgBC,UAAhB,CAA4BC,SAA5B,CAAuCC,QAAvC,KAAuD,OAAvD,CACA,MAAOC,CAAAA,aAAP,KAA0B,uCAA1B,CACA,MAAOC,CAAAA,UAAP,KAAuB,iCAAvB,CACA,MAAOC,CAAAA,MAAP,KAAmB,yBAAnB,CACA,OAASC,WAAT,CAAsBC,UAAtB,KAAwC,cAAxC,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,OAAT,KAAwB,uBAAxB,C,wFAEA,QAASC,CAAAA,UAAT,CAAoBC,KAApB,CAA2B,CACvBA,KAAK,CAACC,sBAAN,CAA6B,KAA7B,EACA,GAAMC,CAAAA,QAAQ,CAAGP,WAAW,EAA5B,CACA,GAAMQ,CAAAA,IAAI,CAAGD,QAAQ,CAACE,QAAT,CAAkBC,KAAlB,CAAwB,GAAxB,EAA6B,CAA7B,CAAb,CACA,cAAuBd,QAAQ,CAAC,CAAC,EAAD,CAAD,CAA/B,wCAAOe,IAAP,eAAYC,OAAZ,eACA,gBAAelB,UAAU,CAACS,OAAD,CAAzB,CAAOU,IAAP,aAAOA,IAAP,CACAlB,SAAS,CAAC,UAAI,CACV,GAAMmB,CAAAA,OAAO,0FAAG,iKACMZ,CAAAA,KAAK,CAACa,GAAN,CAAU,UAAYP,IAAtB,CADN,QACNQ,GADM,eAEZJ,OAAO,CAACI,GAAG,CAACC,IAAL,CAAP,CAFY,sDAAH,kBAAPH,CAAAA,OAAO,0CAAb,CAIAA,OAAO,GACV,CANQ,CAMP,CAACN,IAAD,CANO,CAAT,CAOA,GAAMU,CAAAA,oBAAoB,CAAG,QAAvBA,CAAAA,oBAAuB,CAACC,QAAD,CAAc,CACvC,GAAGA,QAAH,CAAY,CACRd,KAAK,CAACe,OAAN,CAAcC,IAAd,SAA2B,CAACC,KAAK,CAACX,IAAI,CAAC,CAAD,CAAX,CAA3B,EACH,CACJ,CAJD,CAKA,GAAMY,CAAAA,sBAAsB,2FAAG,kBAAOC,UAAP,0HACxBA,UADwB,kEAGbtB,CAAAA,KAAK,CAACuB,MAAN,kBAAuBd,IAAI,CAAC,CAAD,CAAJ,CAAQe,GAA/B,EAAqC,CAACT,IAAI,CAAC,CAACU,QAAQ,CAACd,IAAI,CAACc,QAAf,CAAN,CAArC,CAHa,QAInBC,MAAM,CAACrB,QAAP,CAAgBsB,OAAhB,CAAwB,GAAxB,EAJmB,uJAAH,kBAAtBN,CAAAA,sBAAsB,6CAA5B,CAQA,mBACI,aAAK,SAAS,CAAExB,MAAM,CAAC+B,UAAvB,wBACI,KAAC,UAAD,EAAY,SAAS,CAAEnB,IAAI,CAAC,CAAD,CAA3B,EADJ,cAEI,KAAC,aAAD,EAAe,WAAW,CAAEA,IAAI,CAAC,CAAD,CAAJ,CAAQoB,OAApC,CAA6C,gBAAgB,CAAEb,oBAA/D,CAAqF,kBAAkB,CAAEK,sBAAzG,EAFJ,GADJ,CAMH,CAED,cAAetB,CAAAA,UAAU,CAACG,UAAD,CAAzB","sourcesContent":["import React, { useContext, useEffect, useState } from 'react'\r\nimport PostContainer from '../Layout/PostContainer/PostContainer'\r\nimport CoverTitle from '../Layout/CoverTitle/CoverTitle'\r\nimport styles from './SinglePost.module.css'\r\nimport { useLocation, withRouter } from 'react-router'\r\nimport axios from 'axios'\r\nimport { Context } from '../../context/Context'\r\n\r\nfunction SinglePost(props) {\r\n    props.setWhiteHeaderCallback(false);\r\n    const location = useLocation();\r\n    const slug = location.pathname.split('/')[2];\r\n    const [post,setPost] = useState([{}]);\r\n    const {user} = useContext(Context)\r\n    useEffect(()=>{\r\n        const getPost = async () => {\r\n            const res = await axios.get('/posts/' + slug);\r\n            setPost(res.data);\r\n        }\r\n        getPost();\r\n    },[slug])\r\n    const editCallBackFunction = (editData) => {\r\n        if(editData){\r\n            props.history.push(`/edit`,{state:post[0]})\r\n        }\r\n    }\r\n    const deleteCallBackFunction = async (deleteData) => {\r\n        if(deleteData){\r\n            try{\r\n                await axios.delete(`/posts/${post[0]._id}`,{data:{username:user.username}})\r\n                window.location.replace('/')\r\n            } catch(err){}\r\n        }\r\n    }\r\n    return (\r\n        <div className={styles.singlePost}>\r\n            <CoverTitle postCover={post[0]}/>\r\n            <PostContainer postContent={post[0].content} editCallBackProp={editCallBackFunction} deleteCallBackProp={deleteCallBackFunction}/>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default withRouter(SinglePost)"]},"metadata":{},"sourceType":"module"}