{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/sangt/OneDrive/Sang Shares Something/sss-official/client/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/sangt/OneDrive/Sang Shares Something/sss-official/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/sangt/OneDrive/Sang Shares Something/sss-official/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useContext,useState}from'react';import{Context}from'../../context/Context';import styles from'./Profile.module.css';import axios from'axios';import{useHistory}from'react-router';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Profile(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),authorname=_useState2[0],setAuthorname=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),email=_useState4[0],setEmail=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),password=_useState6[0],setPassword=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),error=_useState8[0],setError=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),passErr=_useState10[0],setPassErr=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),avatar=_useState12[0],setAvatar=_useState12[1];var _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),cover=_useState14[0],setCover=_useState14[1];var _useState15=useState(''),_useState16=_slicedToArray(_useState15,2),passcheck=_useState16[0],setPassCheck=_useState16[1];var _useContext=useContext(Context),user=_useContext.user,dispatch=_useContext.dispatch;var history=useHistory();var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var updatedUser,dataCover,covername,dataAvatar,avatarname;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();setError(false);setPassErr(false);if(!(password===passcheck)){_context.next=47;break;}updatedUser={userId:user._id,username:user.username,authorname:authorname,email:email,password:password};if(!cover){_context.next=19;break;}dataCover=new FormData();covername=Date.now()+'_'+cover.name;dataCover.append('type','profileCover');dataCover.append('name',covername);dataCover.append('file',cover);dataCover.append('userID',user._id);_context.prev=12;_context.next=15;return axios.post('/upload',dataCover);case 15:_context.next=19;break;case 17:_context.prev=17;_context.t0=_context[\"catch\"](12);case 19:if(!avatar){_context.next=34;break;}dataAvatar=new FormData();avatarname=Date.now()+'_'+avatar.name;dataAvatar.append('type','profileAvatar');dataAvatar.append('name',avatarname);dataAvatar.append('file',avatar);dataAvatar.append('userID',user._id);_context.prev=26;_context.next=29;return axios.post('/upload',dataAvatar);case 29:_context.next=34;break;case 31:_context.prev=31;_context.t1=_context[\"catch\"](26);console.log(_context.t1);case 34:_context.prev=34;_context.next=37;return axios.put(\"/users/\".concat(user._id),updatedUser);case 37:console.log(updatedUser);dispatch({type:\"LOGOUT\"});history.push('/login');_context.next=45;break;case 42:_context.prev=42;_context.t2=_context[\"catch\"](34);console.log(_context.t2);case 45:_context.next=48;break;case 47:setPassErr(true);case 48:case\"end\":return _context.stop();}}},_callee,null,[[12,17],[26,31],[34,42]]);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:styles.profile,children:[/*#__PURE__*/_jsxs(\"div\",{className:styles.mainInfo,children:[/*#__PURE__*/_jsxs(\"div\",{className:styles.cover,children:[cover||user.profileCover?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"img\",{className:styles.coverPhoto,alt:\"\",src:user.profileCover?\"https://drive.google.com/uc?id=\".concat(user.profileCover):URL.createObjectURL(cover)}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"cover\",children:/*#__PURE__*/_jsx(\"i\",{className:\"\".concat(styles.editIcon,\" \").concat(styles.editCover,\" fas fa-pencil-alt\")})}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",id:\"cover\",style:{display:'none'},onChange:function onChange(e){setCover(e.target.files[0]);user.profileCover=null;}})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"img\",{className:styles.coverPhoto,alt:\"\",style:{backgroundImage:\"url(http://localhost:5000/images/covers/1632111556548_DSCF0639.jpg)\"}}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"cover\",children:/*#__PURE__*/_jsx(\"i\",{className:\"\".concat(styles.editIcon,\" \").concat(styles.editCover,\" fas fa-pencil-alt\")})}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",id:\"cover\",style:{display:'none'},onChange:function onChange(e){setCover(e.target.files[0]);}})]}),avatar||user.profileAvatar?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"img\",{alt:\"\",className:styles.avatar,src:user.profileAvatar?\"https://drive.google.com/uc?id=\".concat(user.profileAvatar):URL.createObjectURL(avatar)}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"avatar\",children:/*#__PURE__*/_jsx(\"i\",{className:\"\".concat(styles.editIcon,\" fas fa-pencil-alt\")})}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",id:\"avatar\",style:{display:'none'},onChange:function onChange(e){setAvatar(e.target.files[0]);user.profileAvatar=null;}})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"img\",{alt:\"\",className:styles.avatar,style:{backgroundColor:\"white\"}}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"avatar\",children:/*#__PURE__*/_jsx(\"i\",{className:\"\".concat(styles.editIcon,\" fas fa-pencil-alt\")})}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",id:\"avatar\",style:{display:'none'},onChange:function onChange(e){setAvatar(e.target.files[0]);}})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.sideInfo,children:[/*#__PURE__*/_jsxs(\"h3\",{children:[\"1000 \",/*#__PURE__*/_jsx(\"span\",{children:\"Follower\"})]}),/*#__PURE__*/_jsxs(\"h3\",{children:[\"500 \",/*#__PURE__*/_jsx(\"span\",{children:\"Posts\"})]}),/*#__PURE__*/_jsxs(\"h3\",{children:[\"1000 \",/*#__PURE__*/_jsx(\"span\",{children:\"Likes\"})]}),/*#__PURE__*/_jsxs(\"h3\",{children:[\"1000 \",/*#__PURE__*/_jsx(\"span\",{children:\"Comments\"})]})]})]}),/*#__PURE__*/_jsxs(\"form\",{className:styles.textForm,onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Basic Information\"}),/*#__PURE__*/_jsxs(\"div\",{className:styles.infoSide,children:[/*#__PURE__*/_jsxs(\"div\",{className:styles.textField,children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"Full Name\",/*#__PURE__*/_jsx(\"span\",{className:styles.textDanger,children:\"*\"})]}),/*#__PURE__*/_jsx(\"input\",{name:\"fullName\",type:\"text\",required:true,maxLength:\"500\",className:styles.textInput,onChange:function onChange(e){setAuthorname(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.textField,children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"Email\",/*#__PURE__*/_jsx(\"span\",{className:styles.textDanger,children:\"*\"})]}),/*#__PURE__*/_jsx(\"input\",{name:\"email\",type:\"text\",required:true,maxLength:\"500\",className:styles.textInput,onChange:function onChange(e){setEmail(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.textField,children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"Password\",/*#__PURE__*/_jsx(\"span\",{className:styles.textDanger,children:\"*\"})]}),/*#__PURE__*/_jsx(\"input\",{name:\"password\",type:\"password\",required:true,maxLength:\"500\",className:styles.textInput,onChange:function onChange(e){setPassword(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.textField,children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"Confirm Password\",/*#__PURE__*/_jsx(\"span\",{className:styles.textDanger,children:\"*\"})]}),/*#__PURE__*/_jsx(\"input\",{name:\"password\",type:\"password\",required:true,maxLength:\"500\",className:styles.textInput,onChange:function onChange(e){setPassCheck(e.target.value);}})]}),passErr?/*#__PURE__*/_jsx(\"h5\",{children:\"Wrong Confirmation\"}):null]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.socialSide,children:[/*#__PURE__*/_jsxs(\"div\",{className:styles.textField,children:[/*#__PURE__*/_jsx(\"label\",{children:\"Facebook\"}),/*#__PURE__*/_jsx(\"input\",{name:\"password\",type:\"text\",maxLength:\"500\",className:styles.textInput,value:\"https://www.facebook.com/sang.tp.11296/\",onChange:function onChange(e){setPassword(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.textField,children:[/*#__PURE__*/_jsx(\"label\",{children:\"Instagram\"}),/*#__PURE__*/_jsx(\"input\",{name:\"password\",type:\"text\",maxLength:\"500\",className:styles.textInput,value:\"https://www.instagram.com/nguoidiban.mua/\",onChange:function onChange(e){setPassword(e.target.value);}})]})]}),error?/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"h5\",{style:{color:'red',textAlign:'right'},children:\"Something went wrong! Please check again...\"})}):null,/*#__PURE__*/_jsx(\"div\",{className:styles.submit,children:/*#__PURE__*/_jsx(\"button\",{className:styles.uploadBtn,type:\"submit\",children:\"Update\"})})]})]});}","map":{"version":3,"sources":["C:/Users/sangt/OneDrive/Sang Shares Something/sss-official/client/src/Pages/About/Profile.js"],"names":["React","useContext","useState","Context","styles","axios","useHistory","Profile","authorname","setAuthorname","email","setEmail","password","setPassword","error","setError","passErr","setPassErr","avatar","setAvatar","cover","setCover","passcheck","setPassCheck","user","dispatch","history","handleSubmit","e","preventDefault","updatedUser","userId","_id","username","dataCover","FormData","covername","Date","now","name","append","post","dataAvatar","avatarname","console","log","put","type","push","profile","mainInfo","profileCover","coverPhoto","URL","createObjectURL","editIcon","editCover","display","target","files","backgroundImage","profileAvatar","backgroundColor","sideInfo","textForm","infoSide","textField","textDanger","textInput","value","socialSide","color","textAlign","submit","uploadBtn"],"mappings":"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","sourcesContent":["import React, { useContext, useState } from 'react'\r\nimport { Context } from '../../context/Context';\r\nimport styles from './Profile.module.css'\r\nimport axios from 'axios';\r\nimport { useHistory } from 'react-router';\r\n\r\nexport default function Profile() {\r\n    const [authorname,setAuthorname] = useState('');\r\n    const [email,setEmail] = useState('');\r\n    const [password,setPassword] = useState('');\r\n    const [error,setError] = useState(false);\r\n    const [passErr,setPassErr] = useState(false);\r\n    const [avatar,setAvatar] = useState(false);\r\n    const [cover,setCover] = useState(false);\r\n    const [passcheck,setPassCheck] = useState('');\r\n    \r\n    const {user,dispatch} = useContext(Context)\r\n    const history = useHistory();\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        setError(false);\r\n        setPassErr(false);\r\n\r\n        if(password === passcheck) {\r\n            const updatedUser = {\r\n                userId: user._id,\r\n                username:user.username,\r\n                authorname,\r\n                email,\r\n                password\r\n            }\r\n            if (cover){\r\n                const dataCover = new FormData();\r\n                const covername = Date.now()+ '_' + cover.name;\r\n                dataCover.append('type','profileCover')\r\n                dataCover.append('name',covername);\r\n                dataCover.append('file',cover);\r\n                dataCover.append('userID',user._id)\r\n                try{\r\n                    await axios.post('/upload', dataCover)\r\n                }catch(err){\r\n                }\r\n            }\r\n            if (avatar){\r\n                const dataAvatar = new FormData();\r\n                const avatarname = Date.now()+ '_' + avatar.name;\r\n                dataAvatar.append('type','profileAvatar')\r\n                dataAvatar.append('name',avatarname);\r\n                dataAvatar.append('file',avatar);\r\n                dataAvatar.append('userID',user._id)\r\n                try{\r\n                    await axios.post('/upload', dataAvatar)\r\n                }catch(err){\r\n                    console.log(err)\r\n                }\r\n                \r\n            }\r\n            try{\r\n                await axios.put(`/users/${user._id}`, updatedUser);\r\n                console.log(updatedUser)\r\n                dispatch({type:\"LOGOUT\"})\r\n                history.push('/login')\r\n            }catch(err){console.log(err)}\r\n        } else setPassErr(true);\r\n    }\r\n    return (\r\n        <div className={styles.profile}>\r\n            <div className={styles.mainInfo}>\r\n                <div className={styles.cover}>\r\n                {cover || user.profileCover ? \r\n                    <>\r\n                        <img className={styles.coverPhoto} alt='' src={user.profileCover?`https://drive.google.com/uc?id=${user.profileCover}`:URL.createObjectURL(cover)}/>\r\n                        <label htmlFor='cover'>\r\n                            <i className={`${styles.editIcon} ${styles.editCover} fas fa-pencil-alt`}></i>\r\n                        </label>\r\n                        <input type='file' id='cover' style={{display:'none'}} onChange={e=>{setCover(e.target.files[0]); user.profileCover=null}}/>\r\n                    </>\r\n                    :\r\n                    <>\r\n                        <img className={styles.coverPhoto} alt='' style={{backgroundImage:`url(http://localhost:5000/images/covers/1632111556548_DSCF0639.jpg)`}}/>\r\n                        <label htmlFor='cover'>\r\n                            <i className={`${styles.editIcon} ${styles.editCover} fas fa-pencil-alt`}></i>\r\n                        </label>\r\n                        <input type='file' id='cover' style={{display:'none'}} onChange={e=>{setCover(e.target.files[0])}}/>\r\n                    </>\r\n                    }\r\n                    {avatar || user.profileAvatar ? \r\n                        <>\r\n                            <img alt='' className={styles.avatar} src={user.profileAvatar? `https://drive.google.com/uc?id=${user.profileAvatar}`:URL.createObjectURL(avatar)}/>\r\n                            <label htmlFor='avatar'>\r\n                                <i className={`${styles.editIcon} fas fa-pencil-alt`}></i>\r\n                            </label>\r\n                            <input type='file' id='avatar' style={{display:'none'}} onChange={e=>{setAvatar(e.target.files[0]); user.profileAvatar=null}}/>\r\n                        </>\r\n                        : \r\n                        <>\r\n                            <img alt='' className={styles.avatar} style={{backgroundColor:\"white\"}}/>\r\n                            <label htmlFor='avatar'>\r\n                                <i className={`${styles.editIcon} fas fa-pencil-alt`}></i>\r\n                            </label>\r\n                            <input type='file' id='avatar' style={{display:'none'}} onChange={e=>{setAvatar(e.target.files[0])}}/>\r\n                        </>}\r\n                    \r\n                </div>\r\n                <div className={styles.sideInfo}>\r\n                    <h3>1000 <span>Follower</span></h3>\r\n                    <h3>500 <span>Posts</span></h3>\r\n                    <h3>1000 <span>Likes</span></h3>\r\n                    <h3>1000 <span>Comments</span></h3>\r\n                </div>\r\n            </div>\r\n            <form className={styles.textForm} onSubmit={handleSubmit}>\r\n                <h3>Basic Information</h3>\r\n                <div className={styles.infoSide}>\r\n                    <div className={styles.textField}>\r\n                        <label>Full Name<span className={styles.textDanger}>*</span></label>\r\n                        <input name='fullName' type='text' required maxLength='500' className={styles.textInput}  onChange={e=>{setAuthorname(e.target.value)}}/>\r\n                    </div>\r\n                    <div className={styles.textField}>\r\n                        <label>Email<span className={styles.textDanger}>*</span></label>\r\n                        <input name='email' type='text' required maxLength='500' className={styles.textInput}  onChange={e=>{setEmail(e.target.value)}}/>\r\n                    </div>\r\n                    <div className={styles.textField}>\r\n                        <label>Password<span className={styles.textDanger}>*</span></label>\r\n                        <input name='password' type='password' required maxLength='500' className={styles.textInput} onChange={e=>{setPassword(e.target.value)}}/>\r\n                    </div>\r\n                    <div className={styles.textField}>\r\n                        <label>Confirm Password<span className={styles.textDanger}>*</span></label>\r\n                        <input name='password' type='password' required maxLength='500' className={styles.textInput} onChange={e=>{setPassCheck(e.target.value)}}/>\r\n                    </div>\r\n                    {passErr?<h5>Wrong Confirmation</h5>:null}\r\n                </div>\r\n                <div className={styles.socialSide}>\r\n                    <div className={styles.textField}>\r\n                        <label>Facebook</label>\r\n                        <input name='password' type='text' maxLength='500' className={styles.textInput} value='https://www.facebook.com/sang.tp.11296/' onChange={e=>{setPassword(e.target.value)}}/>\r\n                    </div>\r\n                    <div className={styles.textField}>\r\n                        <label>Instagram</label>\r\n                        <input name='password' type='text' maxLength='500' className={styles.textInput} value='https://www.instagram.com/nguoidiban.mua/' onChange={e=>{setPassword(e.target.value)}}/>\r\n                    </div>\r\n                </div>\r\n                {error ? <div><h5 style={{color:'red',textAlign:'right'}}>Something went wrong! Please check again...</h5></div>:null}\r\n                <div className={styles.submit}>\r\n                    <button className={styles.uploadBtn} type='submit'>Update</button>\r\n                </div>\r\n            </form>\r\n            \r\n        </div>\r\n    )\r\n}\r\n"]},"metadata":{},"sourceType":"module"}